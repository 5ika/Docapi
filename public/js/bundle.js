function toMarkdown(){if(preview){var e=editeur.getValue().length;1e4>e?md():waitForConvert||(waitForConvert=!0,setTimeout(function(){waitForConvert=!1,md()},1500))}}function md(){var e="";""!==$("#title").val()&&(e="# "+$("#title").val()+"\n");var t=e+editeur.getValue();t=t.replace(/(<script>)/gi,"[Javascript]\n"),t=t.replace(/(<\/script>)/gi,"\n[/Javascript]");var a=marked(t);$("#view").html(a)}function togglePreview(){preview?($("#editor").addClass("m12").removeClass("m6"),$("#view").hide(),$(".fa-eye-slash").removeClass("fa-eye-slash").addClass("fa-eye")):($("#editor").addClass("m6").removeClass("m12"),$("#view").show(),$(".fa-eye").removeClass("fa-eye").addClass("fa-eye-slash"),md()),preview=!preview}function toggleNumberedTitles(){$("#view").toggleClass("numbered-view")}function toggleFullscreen(){editeur.getOption("fullScreen")?editeur.setOption("fullScreen",!1):editeur.setOption("fullScreen",!0),$(".btn-fullscreen-disable").toggleClass("hide")}function parameters(){"none"==$("#modal-parameters").css("display")?$("#modal-parameters").openModal():$("#modal-parameters").closeModal()}function getTags(){var e=$("#tags").val(),t=e.split(/[,;] */);return t.join(", ")}function send(e){if(editeur.getValue()!=lastContent||e)if(""!==$("#title").val()){console.log("Sauvegarde");var t={document:{title:$("#title").val(),content:editeur.getValue(),tags:getTags(),username:$("#username").val(),context:$("#context").val(),toc:$("#toc").is(":checked")||!1}};0!==id&&(t._id=id,$(".link-"+id+" .doc-title").text(t.document.title)),$.post("/api",t,function(e){if(e&&!e.hasOwnProperty("error")){id=e.id,toast(e.message,2e3);var a=new Date,n=a.getHours()+":"+a.getMinutes();$("#last-save").text("Dernière sauvegarde à "+n),lastContent=t.document.content,e.redirectToEdit&&(window.location.href="/"+id)}else toast("Problème serveur. Document non sauvé.",2e3)})}else toast("Pas de titre. Document non sauvé",2e3)}function del(){0!==id?$.ajax({url:"/api/"+id,type:"DELETE",success:function(e){window.location.href="/"}}):toast("Document non sauvé",2e3)}function newDocument(){window.location.href="/"}var toast=Materialize.toast,preview=!1,lastContent="",waitForConvert=!1,editeur;$(document).ready(function(){$(".modal-trigger").leanModal(),$(".link-"+id).addClass("active"),toMarkdown(),editeur=CodeMirror.fromTextArea($("textarea")[0]),editeur.on("change",toMarkdown),window.setInterval(function(){""!==$("#title").val()&&""!==$("#content").val()&&send()},6e4)}),$(document).keydown(function(e){if(e.ctrlKey)switch(e.keyCode){case 83:send(),e.preventDefault();break;case 78:newDocument(),e.preventDefault();break;case 79:togglePreview(),e.preventDefault();break;case 80:toggleFullscreen(),e.preventDefault()}});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRvb2xzLmpzIiwiZWRpdG9yLmpzIl0sIm5hbWVzIjpbInRvTWFya2Rvd24iLCJwcmV2aWV3IiwiY2hhckNvdW50IiwiZWRpdGV1ciIsImdldFZhbHVlIiwibGVuZ3RoIiwibWQiLCJ3YWl0Rm9yQ29udmVydCIsInNldFRpbWVvdXQiLCJ0aXRyZSIsIiQiLCJ2YWwiLCJjb250ZW50IiwicmVwbGFjZSIsIm1kQ29udGVudCIsIm1hcmtlZCIsImh0bWwiLCJ0b2dnbGVQcmV2aWV3IiwiYWRkQ2xhc3MiLCJyZW1vdmVDbGFzcyIsImhpZGUiLCJzaG93IiwidG9nZ2xlTnVtYmVyZWRUaXRsZXMiLCJ0b2dnbGVDbGFzcyIsInRvZ2dsZUZ1bGxzY3JlZW4iLCJnZXRPcHRpb24iLCJzZXRPcHRpb24iLCJwYXJhbWV0ZXJzIiwiY3NzIiwib3Blbk1vZGFsIiwiY2xvc2VNb2RhbCIsImdldFRhZ3MiLCJ0YWdzU3RyaW5nIiwidGFncyIsInNwbGl0Iiwiam9pbiIsInNlbmQiLCJmb3JjZVNhdmUiLCJsYXN0Q29udGVudCIsImNvbnNvbGUiLCJsb2ciLCJkb2N1bWVudCIsInRpdGxlIiwidXNlcm5hbWUiLCJjb250ZXh0IiwidG9jIiwiaXMiLCJpZCIsIl9pZCIsInRleHQiLCJwb3N0IiwiZGF0YSIsImhhc093blByb3BlcnR5IiwidG9hc3QiLCJtZXNzYWdlIiwibm93IiwiRGF0ZSIsImRhdGUiLCJnZXRIb3VycyIsImdldE1pbnV0ZXMiLCJyZWRpcmVjdFRvRWRpdCIsIndpbmRvdyIsImxvY2F0aW9uIiwiaHJlZiIsImRlbCIsImFqYXgiLCJ1cmwiLCJ0eXBlIiwic3VjY2VzcyIsIm5ld0RvY3VtZW50IiwiTWF0ZXJpYWxpemUiLCJyZWFkeSIsImxlYW5Nb2RhbCIsIkNvZGVNaXJyb3IiLCJmcm9tVGV4dEFyZWEiLCJvbiIsInNldEludGVydmFsIiwia2V5ZG93biIsImUiLCJjdHJsS2V5Iiwia2V5Q29kZSIsInByZXZlbnREZWZhdWx0Il0sIm1hcHBpbmdzIjoiQUFz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Q0FsQixhQUdBRyxRQUFBc0UsV0FBQUMsYUFBQWhFLEVBQUEsWUFBQSxJQUNBUCxRQUFBd0UsR0FBQSxTQUFBM0UsWUFHQTZELE9BQUFlLFlBQUEsV0FDQSxLQUFBbEUsRUFBQSxVQUFBQyxPQUFBLEtBQUFELEVBQUEsWUFBQUMsT0FDQXlCLFFBQ0EsT0FrRUExQixFQUFBK0IsVUFBQW9DLFFBQUEsU0FBQUMsR0FDQSxHQUFBQSxFQUFBQyxRQUNBLE9BQUFELEVBQUFFLFNBRUEsSUFBQSxJQUNBNUMsT0FDQTBDLEVBQUFHLGdCQUNBLE1BRUEsS0FBQSxJQUNBWixjQUNBUyxFQUFBRyxnQkFDQSxNQUVBLEtBQUEsSUFDQWhFLGdCQUNBNkQsRUFBQUcsZ0JBQ0EsTUFFQSxLQUFBLElBQ0F6RCxtQkFDQXNELEVBQUFHIiwiZmlsZSI6ImJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciB0b2FzdCA9IE1hdGVyaWFsaXplLnRvYXN0O1xudmFyIHByZXZpZXcgPSBmYWxzZTtcbnZhciBsYXN0Q29udGVudCA9IFwiXCI7XG52YXIgd2FpdEZvckNvbnZlcnQgPSBmYWxzZTtcbnZhciBlZGl0ZXVyO1xuXG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcbiAgJCgnLm1vZGFsLXRyaWdnZXInKS5sZWFuTW9kYWwoKTtcbiAgJCgnLmxpbmstJyArIGlkKS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gIHRvTWFya2Rvd24oKTtcblxuICAvLyBJbml0aWFsaXNhaW9uIGRlIGwnw6lkaXRldXJcbiAgZWRpdGV1ciA9IENvZGVNaXJyb3IuZnJvbVRleHRBcmVhKCQoXCJ0ZXh0YXJlYVwiKVswXSk7XG4gIGVkaXRldXIub24oXCJjaGFuZ2VcIiwgdG9NYXJrZG93bik7XG5cbiAgLy8gU2F1dmVnYXJkZSBhdXRvbWF0aXF1ZSB0b3V0ZXMgbGVzIG1pbnV0ZXNcbiAgd2luZG93LnNldEludGVydmFsKGZ1bmN0aW9uKCkge1xuICAgIGlmICgkKCcjdGl0bGUnKS52YWwoKSAhPT0gXCJcIiAmJiAkKCcjY29udGVudCcpLnZhbCgpICE9PSBcIlwiKVxuICAgICAgc2VuZCgpO1xuICB9LCA2MDAwMCk7XG59KTtcblxuZnVuY3Rpb24gdG9NYXJrZG93bigpIHtcbiAgaWYgKHByZXZpZXcpIHtcbiAgICB2YXIgY2hhckNvdW50ID0gZWRpdGV1ci5nZXRWYWx1ZSgpLmxlbmd0aDtcbiAgICBpZiAoY2hhckNvdW50IDwgMTAwMDApIG1kKCk7XG4gICAgZWxzZSBpZiAoIXdhaXRGb3JDb252ZXJ0KSB7XG4gICAgICB3YWl0Rm9yQ29udmVydCA9IHRydWU7XG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICB3YWl0Rm9yQ29udmVydCA9IGZhbHNlO1xuICAgICAgICBtZCgpO1xuICAgICAgfSwgMTUwMCk7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIG1kKCkge1xuICB2YXIgdGl0cmUgPSBcIlwiO1xuICBpZiAoJCgnI3RpdGxlJykudmFsKCkgIT09IFwiXCIpIHRpdHJlID0gXCIjIFwiICsgJCgnI3RpdGxlJykudmFsKCkgKyBcIlxcblwiO1xuICB2YXIgY29udGVudCA9IHRpdHJlICsgZWRpdGV1ci5nZXRWYWx1ZSgpO1xuICAvL2NvbnRlbnQgPSBjb250ZW50LnJlcGxhY2UoLyg8KFtePl0rKT4pL2lnLCBcIlwiKTtcbiAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZSgvKDxzY3JpcHQ+KS9pZywgXCJbSmF2YXNjcmlwdF1cXG5cIik7XG4gIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2UoLyg8XFwvc2NyaXB0PikvaWcsIFwiXFxuWy9KYXZhc2NyaXB0XVwiKTtcbiAgdmFyIG1kQ29udGVudCA9IG1hcmtlZChjb250ZW50KTtcbiAgJChcIiN2aWV3XCIpLmh0bWwobWRDb250ZW50KTtcbn1cblxuZnVuY3Rpb24gdG9nZ2xlUHJldmlldygpIHtcbiAgaWYgKHByZXZpZXcpIHtcbiAgICAkKCcjZWRpdG9yJykuYWRkQ2xhc3MoJ20xMicpLnJlbW92ZUNsYXNzKCdtNicpO1xuICAgICQoJyN2aWV3JykuaGlkZSgpO1xuICAgICQoXCIuZmEtZXllLXNsYXNoXCIpLnJlbW92ZUNsYXNzKCdmYS1leWUtc2xhc2gnKS5hZGRDbGFzcygnZmEtZXllJyk7XG5cbiAgfSBlbHNlIHtcbiAgICAkKCcjZWRpdG9yJykuYWRkQ2xhc3MoJ202JykucmVtb3ZlQ2xhc3MoJ20xMicpO1xuICAgICQoJyN2aWV3Jykuc2hvdygpO1xuICAgICQoXCIuZmEtZXllXCIpLnJlbW92ZUNsYXNzKCdmYS1leWUnKS5hZGRDbGFzcygnZmEtZXllLXNsYXNoJyk7XG4gICAgbWQoKTtcbiAgfVxuICBwcmV2aWV3ID0gIXByZXZpZXc7XG59XG5cbmZ1bmN0aW9uIHRvZ2dsZU51bWJlcmVkVGl0bGVzKCkge1xuICAkKFwiI3ZpZXdcIikudG9nZ2xlQ2xhc3MoJ251bWJlcmVkLXZpZXcnKTtcbn1cblxuZnVuY3Rpb24gdG9nZ2xlRnVsbHNjcmVlbigpIHtcbiAgaWYgKGVkaXRldXIuZ2V0T3B0aW9uKFwiZnVsbFNjcmVlblwiKSlcbiAgICBlZGl0ZXVyLnNldE9wdGlvbihcImZ1bGxTY3JlZW5cIiwgZmFsc2UpO1xuICBlbHNlIGVkaXRldXIuc2V0T3B0aW9uKFwiZnVsbFNjcmVlblwiLCB0cnVlKTtcbiAgJCgnLmJ0bi1mdWxsc2NyZWVuLWRpc2FibGUnKS50b2dnbGVDbGFzcygnaGlkZScpO1xufVxuXG5mdW5jdGlvbiBwYXJhbWV0ZXJzKCkge1xuICBpZiAoJChcIiNtb2RhbC1wYXJhbWV0ZXJzXCIpLmNzcygnZGlzcGxheScpID09IFwibm9uZVwiKVxuICAgICQoJyNtb2RhbC1wYXJhbWV0ZXJzJykub3Blbk1vZGFsKCk7XG4gIGVsc2UgJCgnI21vZGFsLXBhcmFtZXRlcnMnKS5jbG9zZU1vZGFsKCk7XG59XG5cbmZ1bmN0aW9uIGdldFRhZ3MoKSB7XG4gIHZhciB0YWdzU3RyaW5nID0gJChcIiN0YWdzXCIpLnZhbCgpO1xuICB2YXIgdGFncyA9IHRhZ3NTdHJpbmcuc3BsaXQoL1ssO10gKi8pO1xuICByZXR1cm4gdGFncy5qb2luKCcsICcpO1xufVxuXG4kKGRvY3VtZW50KS5rZXlkb3duKGZ1bmN0aW9uKGUpIHtcbiAgaWYgKGUuY3RybEtleSkge1xuICAgIHN3aXRjaCAoZS5rZXlDb2RlKSB7XG4gICAgICAvL0NUUkwrUyA6IFNhdXZlZ2FyZGUgbWFudWVsbGVcbiAgICAgIGNhc2UgODM6XG4gICAgICAgIHNlbmQoKTtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBicmVhaztcbiAgICAgIC8vQ1RSTCtOIDogTm91dmVhdSBkb2N1bWVudFxuICAgICAgY2FzZSA3ODpcbiAgICAgICAgbmV3RG9jdW1lbnQoKTtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBicmVhaztcbiAgICAgIC8vQ1RSTCtPIDogVG9nZ2xlIFByZXZpZXdcbiAgICAgIGNhc2UgNzk6XG4gICAgICAgIHRvZ2dsZVByZXZpZXcoKTtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBicmVhaztcbiAgICAgIC8vQ1RSTCtPIDogVG9nZ2xlIEZ1bGxTY3JlZW5cbiAgICAgIGNhc2UgODA6XG4gICAgICAgIHRvZ2dsZUZ1bGxzY3JlZW4oKTtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cbn0pO1xuIiwiZnVuY3Rpb24gc2VuZChmb3JjZVNhdmUpIHtcbiAgICBpZiAoZWRpdGV1ci5nZXRWYWx1ZSgpICE9IGxhc3RDb250ZW50IHx8IGZvcmNlU2F2ZSlcbiAgICAgICAgaWYgKCQoJyN0aXRsZScpLnZhbCgpICE9PSBcIlwiKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIlNhdXZlZ2FyZGVcIik7XG4gICAgICAgICAgICB2YXIgcGFyYW1ldGVycyA9IHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudDoge1xuICAgICAgICAgICAgICAgICAgICB0aXRsZTogJCgnI3RpdGxlJykudmFsKCksXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGVkaXRldXIuZ2V0VmFsdWUoKSxcbiAgICAgICAgICAgICAgICAgICAgdGFnczogZ2V0VGFncygpLFxuICAgICAgICAgICAgICAgICAgICB1c2VybmFtZTogJCgnI3VzZXJuYW1lJykudmFsKCksXG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHQ6ICQoJyNjb250ZXh0JykudmFsKCksXG4gICAgICAgICAgICAgICAgICAgIHRvYzogJCgnI3RvYycpLmlzKCc6Y2hlY2tlZCcpIHx8IGZhbHNlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmIChpZCAhPT0gMCkge1xuICAgICAgICAgICAgICAgIHBhcmFtZXRlcnMuX2lkID0gaWQ7XG4gICAgICAgICAgICAgICAgJCgnLmxpbmstJyArIGlkICsgXCIgLmRvYy10aXRsZVwiKS50ZXh0KHBhcmFtZXRlcnMuZG9jdW1lbnQudGl0bGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgJC5wb3N0KFwiL2FwaVwiLCBwYXJhbWV0ZXJzLCBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgaWYgKGRhdGEgJiYgIWRhdGEuaGFzT3duUHJvcGVydHkoJ2Vycm9yJykpIHtcbiAgICAgICAgICAgICAgICAgICAgaWQgPSBkYXRhLmlkO1xuICAgICAgICAgICAgICAgICAgICB0b2FzdChkYXRhLm1lc3NhZ2UsIDIwMDApO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbm93ID0gbmV3IERhdGUoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGUgPSBub3cuZ2V0SG91cnMoKSArIFwiOlwiICsgbm93LmdldE1pbnV0ZXMoKTtcbiAgICAgICAgICAgICAgICAgICAgJChcIiNsYXN0LXNhdmVcIikudGV4dChcIkRlcm5pw6hyZSBzYXV2ZWdhcmRlIMOgIFwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGUpO1xuICAgICAgICAgICAgICAgICAgICBsYXN0Q29udGVudCA9IHBhcmFtZXRlcnMuZG9jdW1lbnQuY29udGVudDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEucmVkaXJlY3RUb0VkaXQpIHdpbmRvdy5sb2NhdGlvbi5ocmVmID1cbiAgICAgICAgICAgICAgICAgICAgICAgICcvJyArIGlkO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB0b2FzdChcIlByb2Jsw6htZSBzZXJ2ZXVyLiBEb2N1bWVudCBub24gc2F1dsOpLlwiLDIwMDApO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB0b2FzdChcIlBhcyBkZSB0aXRyZS4gRG9jdW1lbnQgbm9uIHNhdXbDqVwiLCAyMDAwKTtcbn1cblxuZnVuY3Rpb24gZGVsKCkge1xuICAgIGlmIChpZCAhPT0gMClcbiAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgIHVybDogXCIvYXBpL1wiICsgaWQsXG4gICAgICAgICAgICB0eXBlOiBcIkRFTEVURVwiLFxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJy8nO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICBlbHNlIHRvYXN0KFwiRG9jdW1lbnQgbm9uIHNhdXbDqVwiLCAyMDAwKTtcbn1cblxuZnVuY3Rpb24gbmV3RG9jdW1lbnQoKSB7XG4gICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnLyc7XG59XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
